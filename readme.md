# Fast pizza

## Model/admin_products.php

Файл відповідає за обробку запитів з панелі адміністратора.

### Логіка роботи  
* get_all_products() - отримання всіх товарів меню.
* update_product() - оновити один товар.
* update_products_bulk() - оновлення групи товарів.
* function create_product() - створення нового продукту.
* function delete_product() - видалення продукту.
* get_product_by_id() - отримання товару по id.

## Model/auth.php

Файл відповідає за обробку запитів пов'язаних з реєстрацією користувача.

### Логіка роботи

* register_client() - реєстрація нового клієнта.
* get_client_by_phone() - отримання клієнта за телефоном.
* get_client_by_email() - отримання клієнта за email.
* login_client_by_phone() - вхід користувача через телефон (перевірка пароля).
* login_client_by_email() - вхід користувача через email (перевірка пароля).
* get_current_user_client() - отримання поточного користувача з сесії.
* is_client_logged_in() - перевірка чи користувач авторизований.
* logout_client() - вихід користувача.
* set_client_session() - встановлення сесії для клієнта.
* update_client_stripe_id() - оновлення id клієнта для сервіса оплати.

## Model/db.php

Файл відповідає за підключаення бази даних до проекту.

## Model/products.php

Файл відповідає за запити для роботи меню.

---

## Presenter/index_actions.php

Цей файл є API-ендпойнтом для обробки POST-запитів, які додають товари в кошик. Повертає відповіді у форматі JSON.

### Логіка роботи

* Виконує `session_start()` та встановлює заголовок `Content-Type: application/json`.
* Ініціалізує `$_SESSION['cart]`, якщо кошик ще не створений.
* Очікує POST-параметр `action`; підтримувані дії:

1. **add_pizza**

   * Параметри: `id`, необов’язково — `name`, `price`, `img`.
   * Додає або інкрементує піцу у кошику за ключем `pizza_{id}`.

2. **add_drink**

   * Параметри: `drink_key`, необов’язково — `name`, `price`.
   * Додає або інкрементує напій у кошику за ключем `drink_{drink_key}`.

* На успішні дії повертає JSON:

  ```json
  { "success": true, "message": "..." }
  ```
* На помилкові —

  ```json
  { "success": false, "message": "..." }
  ```
* Для невідомого параметра `action` повертає помилку: **"Невідома дія"**.

---

### Примітка

Обидва файли використовують сесійний масив `$_SESSION['cart']` та не виконують валідацію даних чи збереження в базі даних.
`index_actions.php` використовується переважно для AJAX-запитів із фронтенда.
